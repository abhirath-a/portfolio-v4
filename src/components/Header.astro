---
import { SunMoon } from "@lucide/astro";

const navLinks = [
  { href: "/", label: "About" },
  { href: "/blog", label: "Blog" },
  { href: "/search", label: "Search" },
  { href: "/contact", label: "Contact" },
  { href: "/now", label: "Now" },
];
---

<aside class="hidden lg:block lg:fixed lg:left-0 lg:top-0 lg:h-screen lg:w-64 p-12 lg:flex lg:flex-col lg:justify-between">
  <div>
    <a href="#about" class="block mb-16">
      <h1 class="text-xl font-bold tracking-tight">Abhirath</h1>
    </a>
    <nav class="flex flex-col gap-1">
      {navLinks.map(link => (
        <a 
          href={link.href} 
          class={`py-2 text-sm font-medium transition-opacity ${
            Astro.url.pathname === link.href ? "opacity-100 font-bold" : "opacity-40 hover:opacity-70"
          }`}
        >
          {link.label}
        </a>
      ))}
    </nav>
  </div>
  <div class="space-y-4">
    <button id="theme-toggle" class="block text-xs font-medium opacity-40 hover:opacity-70 transition-opacity">
      <SunMoon class="h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all" />
    </button>
    <div class="text-xs opacity-40">{new Date().getFullYear()}</div>
  </div>
</aside>

<!-- Mobile nav -->
<nav class="lg:hidden fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-sm border-b border-border">
  <div class="flex items-center justify-between px-6 py-4">
    <a href="#about" class="text-lg font-bold tracking-tight">Abhirath</a>
    <button id="mobile-menu-btn" class="text-sm font-medium opacity-40 hover:opacity-70 transition-opacity">Menu</button>
  </div>
  <div id="mobile-menu" class="hidden px-6 py-4 border-t border-border bg-background flex flex-col gap-3 mb-4">
    {navLinks.map(link => (
      <a
        href={link.href}
        class={`text-sm font-medium transition-opacity ${
          Astro.url.pathname === link.href ? "opacity-100 font-bold" : "opacity-40 hover:opacity-70"
        }`}
      >
        {link.label}
      </a>
    ))}
    <div class="flex items-center justify-between pt-3 border-t border-border">
      <button id="theme-toggle-mobile" class="text-xs font-medium opacity-40 hover:opacity-70 transition-opacity">
        <SunMoon class="h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all" />
      </button>
      <div class="text-xs opacity-40">{new Date().getFullYear()}</div>
    </div>
  </div>
</nav>


  <script is:inline>
    // Theme toggle
    const themeToggle = document.getElementById('theme-toggle');
    const themeToggleMobile = document.getElementById('theme-toggle-mobile');
    function toggleTheme() {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');

    }
    themeToggle.addEventListener('click', toggleTheme);
    themeToggleMobile.addEventListener('click', toggleTheme);

    // Mobile menu
    const menuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      menuBtn.textContent = mobileMenu.classList.contains('hidden') ? 'Menu' : 'Close';
    });


    // Initialize theme on load
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }
</script>
